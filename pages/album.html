<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
        <link rel="stylesheet" type="text/css" href="../style.css">
        <link rel="stylesheet" href="../mdl/material.min.css">
        <script src="../mdl/material.min.js" id="mdl-script"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="../css/dialog-polyfill.css">
    </head>
    <body>
        <content>
            <div class="mdl-tabs__panel">
            <div class="mdl-grid">
                <div class="mdl-layout-spacer"></div>
                <div id="album-box" class="mdl-cell mdl-cell--3-col">
            
                    <div class="mdl-grid">
                        <div id="cla-infos" class="mdl-cell mdl-cell--3-col">

                            <div id="img_infos">
                                <a href="#">
                                    <div id="imgperfil"></div>
                                    <div id="badgeperfil">
                                        <i class="material-icons">photo_camera</i>
                                    </div>
                                </a>

                                <div id="perfilinfos">
                                    <p class="titulo">
                                        <span id="perfilnome">Billy</span>,
                                        <span id="perfilidade">12</span>
                                        <span><a href="#"><i class="material-icons">border_color</i></a></span>
                                    </p>
                                    <p id="perfilbio">Olá, sou um West Highland White Terrier fofinho, amante da natureza e doador desde os 5 anos.</p>
                                    <p id="perfiltiposanguineo">A+</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="mdl-layout-spacer"></div>
                </div>
            </div>

            <div class="mdl-tabs mdl-js-tabs">
                <div id="categorias-albumatual" class="mdl-tabs__tab-bar">
                    <a href="#albuns" class="mdl-tabs__tab is-active tab-title">
                        <p id="categoria-album">
                        <span class="pontos">.</span><span>Álbum</span>
                        </p>
                    </a>
                    <a href="#inventorio" class="mdl-tabs__tab tab-title">
                        <p id="categoria-album">
                        <span class="pontos">.</span><span>Arquivo</span> <span class="quantidades">(2)</span>
                        </p>
                    </a>
                </div>

                <div class="mdl-tabs__panel is-active" id="albuns"> <!-- Primeira Aba -->

                    <div class="mdl-grid">
                    <div class="mdl-layout-spacer"></div>
                        <p id="album-title">Álbum III: Datas Comemorativas</p>
                    <div class="mdl-layout-spacer"></div>
                    </div>

                    <div class="mdl-grid">
                        <div class="mdl-layout-spacer"></div>
                        <div class="mdl-card mdl-cell mdl-cell--4-col"> <!-- inicio da estrutura do álbum-->
                            <div class="mdl-grid"> <!--Primeira linha do álbum> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"/></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                            </div>
                            <div class="mdl-grid"> <!--Segunda linha do álbum> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;"src="../img/gota.png"/></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                            </div>
                            <div class="mdl-grid"> <!--Terceira linha do álbum> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"/></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                            </div>
                            <div class="mdl-grid"> <!--Quarta linha do álbum> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/vazio.png"/></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"></div>
                            </div>
                            <div class="mdl-grid">
                                <div class="mdl-cell mdl-cell--1-col infosalbum">
                                    <p class="albuminfos">04/16 figurinhas</p>
                                    <p class="albuminfos">01 combinação</p>
                                </div>
                            </div>
                        </div>
                        <div class="mdl-layout-spacer"></div>
                    </div>

                    <div class="mdl-grid">
                            <div class="mdl-layout-spacer"></div>
                                <p id="album-title">Inventário</p>
                            <div class="mdl-layout-spacer"></div>
                        </div>

                    <div class="mdl-grid">
                        <div class="mdl-layout-spacer"></div>
                        <div class="mdl-card mdl-cell mdl-cell--4-col"> <!-- inicio da estrutura do Inventário-->
                            <div class="mdl-grid"> <!--Primeira linha do Inventário> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                            </div>
                            <div class="mdl-grid"> <!--Segunda linha do Inventário> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                            </div>
                            <div class="mdl-grid"> <!--Terceira linha do Inventário> -->
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                                <div class="mdl-cell mdl-cell--1-col album-space card-spot"><img style="height: 42px;" src="../img/gota.png"></div>
                            </div>
                            <div class="mdl-grid"> 
                                <div id="inventariobotoes" class="mdl-cell mdl-cell--1-col">
                                    <button class="mdl-button" id="itemPositionButton" onclick="dragmeToogle()">
                                        Posicionar no Álbum
                                    </button>
                                    <button class="mdl-button" id="itemShareButton">
                                        Doar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="mdl-layout-spacer"></div>
                    </div>
                </div>

                <div id="inventorio" class="mdl-tabs__panel"> <!-- Segunda aba-->
                    <div class="mdl-grid">
                    <div class="mdl-layout-spacer"></div>
                        <p id="album-title">Álbum II: Memes Brasileiros</p>
                    <div class="mdl-layout-spacer"></div>
                    </div>

                    <div class="mdl-grid">
                        <div class="mdl-layout-spacer"></div>
                        <div class="mdl-card mdl-cell mdl-cell--4-col"> <!-- inicio da estrutura do álbum 1o completo -->
                            <div class="mdl-grid"> <!--Primeira linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid"> <!--Segunda linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid"> <!--Terceira linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid"> <!--Quarta linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid">
                                <div class="mdl-cell mdl-cell--1-col infosalbum">
                                    <p class="albuminfos">16/16 figurinhas</p>
                                    <p class="albuminfos">10 combinações</p>
                                </div>
                            </div>
                        </div>
                        <div class="mdl-layout-spacer"></div>
                    </div>

                    <div class="mdl-grid">
                    <div class="mdl-layout-spacer"></div>
                        <p id="album-title">Álbum I: Literatura Brasileira</p>
                    <div class="mdl-layout-spacer"></div>
                    </div>

                    <div class="mdl-grid">
                        <div class="mdl-layout-spacer"></div>
                        <div class="mdl-card mdl-cell mdl-cell--4-col"> <!-- inicio da estrutura do 2o álbum completo-->
                            <div class="mdl-grid"> <!--Primeira linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid"> <!--Segunda linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid"> <!--Terceira linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid"> <!--Quarta linha do álbum> -->
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                                <a href="#"><div class="mdl-cell mdl-cell--1-col album-space"><img style="height: 42px;" src="../img/gota.png"></div></a>
                            </div>
                            <div class="mdl-grid">
                                <div class="mdl-cell mdl-cell--1-col infosalbum">
                                    <p class="albuminfos">16/16 figurinhas</p>
                                    <p class="albuminfos">10 combinações</p>
                                </div>
                            </div>
                        </div>
                        <div class="mdl-layout-spacer"></div>
                    </div>


                </div>
            </div> 
            <div id="bottom-space" class="mdl-grid"></div>
        </content>

        <!-- Caixa de díalogo que avisa sobre novo nível -->

        <dialog class="mdl-dialog" id="newLevelDialog">
            <button id="dialog-close" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab close"> x </button>
            <h4 id="dialog-title" class="mdl-dialog__title">Nível 8<br>Concluído</h4>
            <img src="../img/levelUp_icon.png" width="200px" id="levelUpIcon">
            <p id="levelup-subtitle">Você salvou 12 vidas!</p>
            <button id="dialog-button" class="mdl-button">Continuar</button>
        </dialog>

        <!-- Caixa de diálogo que avisa sobre nova recompensa -->

        <dialog class="mdl-dialog" id="newItemDialog">
            <button id="dialog-close" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab close"> x </button>
            <h4 id="dialog-title" class="mdl-dialog__title">Você ganhou<br>uma recompensa!</h4>
            <canvas id="levelUpCanvas">Seu browser não tem suporte para canvas</canvas>
            <button id="dialog-button" class="mdl-button">Abrir</button>
        </dialog>
        
        <script src="../js/dialog-polyfill.js"></script>
        <script src="../js/open_chest.js"></script>
        <script src="../app.js"></script>
        <script>

            function changeTabTitle(title) {
                document.getElementById("tab-title").innerText = title;
            }

            // Script que ativa o reposicionamento das cartas //

            var dragmeIsActive = false;

            function dragmeToogle(){

                var spots = document.getElementsByClassName('card-spot');
                
                
                if(dragmeIsActive == false) {
                    
                    for(i = 0; i< spots.length; i++){
                        
                        if(spots[i].hasChildNodes()){
                            let spotChild = spots[i].children;
                            spotChild[0].classList.add('drag-me');
                        }
                    }

                   dragmeIsActive = !dragmeIsActive;
                   document.getElementById("itemPositionButton").innerText = 'OK';
                } else if (dragmeIsActive == true){

                    for(i = 0; i< spots.length; i++){

                        if(spots[i].hasChildNodes()){
                            let spotChild = spots[i].children;
                            spotChild[0].classList.remove('drag-me');
                        }
                    }

                   dragmeIsActive = !dragmeIsActive;
                   document.getElementById("itemPositionButton").innerText = "Posicionar no Álbum";

                } 
                

                console.log(dragmeIsActive)
            }

            // Script que permite o reposicionamento das cartas //
            let imgDrag;
            let imgSelected = false;

            document.addEventListener('click', (e)=> {
                if (e.target.className == 'drag-me' && imgSelected == true) {
                    imgSelected = false;
                    let child = e.target;
                    let oldParent = imgDrag.parentNode
                    child.parentNode.appendChild(imgDrag);
                    oldParent.appendChild(child);
                } else if (e.target.className == 'drag-me' && imgSelected == false) {
                    imgDrag = e.target;
                    imgSelected = !imgSelected;
                } else if (e.target.className == 'mdl-cell mdl-cell--1-col album-space card-spot' && imgSelected == true){
                    if (e.target.hasChildNodes()){
                        let child = e.target.childNodes;
                        imgDrag.parentNode.appendChild(child[0]);
                        e.target.appendChild(imgDrag);
                        imgSelected = false;

                    } else {
                        imgDrag.parentNode.removeChild(imgDrag);
                        e.target.appendChild(imgDrag);
                        imgSelected = !imgSelected;
                    }
                }
                
            }, false);

            document.addEventListener('drop', (e)=>{
                e.preventDefault();
                if(e.target.className == 'card-spot'){
                    imgDrag.parentNode.removeChild(imgDrag);
                    e.target.appendChild(imgDrag);
                }
            })
        </script>
    </body>
</html>